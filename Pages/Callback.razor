@page "/oauth2/callback"  

@inject NavigationManager Navigation

<h3>認証中...</h3>

@code {
    protected override async Task OnInitializedAsync()
    {
        // URL からクエリパラメータ（認証コード）を取得
        var uri = Navigation.Uri;
        var queryParams = Microsoft.AspNetCore.WebUtilities.QueryHelpers.ParseQuery(uri);

        // 'code' クエリパラメータ（Google から返される認証コード）を取得
        var code = queryParams["code"];
        if (!string.IsNullOrEmpty(code))
        {
            // 認証コードを使ってアクセストークンを取得する処理
            await GetAccessTokenFromCodeAsync(code);
        }
        else
        {
            // 認証コードがない場合はエラーメッセージを表示
            Console.WriteLine("認証に失敗しました。");
        }
    }

    private async Task GetAccessTokenFromCodeAsync(string code)
    {
        // Google OAuth 2.0 トークンエンドポイントにリクエストを送信してアクセストークンを取得
        // ここでアクセストークンを取得する処理を実装
        Console.WriteLine("アクセストークンを取得しました。");
    }
}
